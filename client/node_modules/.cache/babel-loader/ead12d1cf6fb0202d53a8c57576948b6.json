{"ast":null,"code":"var _jsxFileName = \"/Users/gabrielpeter/PersonalWebsite1.0/client/src/components/spotify_comparer/client_spotify_data.js\";\nimport './graph_styling.css';\nimport React, { Component } from 'react';\nimport * as $ from \"jquery\";\nimport Chart_Constructor from './chart_constructor'; // https://medium.com/@jonnykalambay/now-playing-using-spotifys-awesome-api-with-react-7db8173a7b13?\n\nclass Spotify_Previewer extends Component {\n  constructor() {\n    super();\n    const params = this.getHashParams();\n\n    if (window.performance) {\n      if (performance.navigation.type == 1) {\n        window.location.replace('http://localhost:5000/login');\n      }\n    }\n\n    this.state = {\n      access_token: '',\n      loggedIn: params.access_token ? true : false,\n      spotify_data: {\n        top_artists: [{\n          'x': 1,\n          'y': 1\n        }],\n        genre_weights: [{\n          'x': 1,\n          'y': 'Undef'\n        }],\n        top_5_artists_graph: [{\n          'x': 'Undef',\n          'y': 1\n        }],\n        top_5_artists_images: [{\n          'name': '',\n          'images': [{\n            'url': ''\n          }]\n        }],\n        top_artists_popularity: [{\n          'x': 1,\n          'y': 1\n        }],\n        popularity_list: [{\n          'x': 1,\n          'y': 1\n        }],\n        average_artist_rank: 0,\n        genre_quantity: [{\n          'x': 1,\n          'y': 1\n        }],\n        genre_intersection: [{\n          'x': 1,\n          'y': 1\n        }],\n        radialRankings: [{\n          'angle': 360\n        }]\n      }\n    };\n  }\n\n  getTopArtists(token) {\n    $.ajax({\n      url: 'https://api.spotify.com/v1/me/top/artists?time_range=long_term&limit=50&offset=0',\n      type: \"GET\",\n      beforeSend: xhr => {\n        xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n      },\n      success: data => {\n        const spotify_data = this.props.analyseTermData(data);\n        this.setState({\n          spotify_data\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    if (this.state.loggedIn) {\n      this.props.loggedIn();\n      this.getTopArtists(this.getHashParams().access_token);\n      console.log('Access Token:', this.getHashParams().access_token);\n      console.log('Refresh Token:', this.getHashParams().refresh_token);\n    }\n  }\n\n  getHashParams() {\n    var hashParams = {};\n    var e,\n        r = /([^&;=]+)=?([^&;]*)/g,\n        q = window.location.hash.substring(1);\n\n    while (e = r.exec(q)) {\n      hashParams[e[1]] = decodeURIComponent(e[2]);\n    }\n\n    return hashParams;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"spotify-components\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"How Similar Are Our Music Tastes?\"), React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, \"This is super important...\"), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"You Like:\"), React.createElement(Chart_Constructor, {\n      average_artist_rank: this.state.spotify_data.average_artist_rank,\n      top_5_artists_images: this.state.spotify_data.top_5_artists_images,\n      data1: this.state.spotify_data.radialRankings,\n      data2: this.state.spotify_data.top_5_artists_graph,\n      genres: this.state.spotify_data.genre_weights,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default Spotify_Previewer;","map":{"version":3,"sources":["/Users/gabrielpeter/PersonalWebsite1.0/client/src/components/spotify_comparer/client_spotify_data.js"],"names":["React","Component","$","Chart_Constructor","Spotify_Previewer","constructor","params","getHashParams","window","performance","navigation","type","location","replace","state","access_token","loggedIn","spotify_data","top_artists","genre_weights","top_5_artists_graph","top_5_artists_images","top_artists_popularity","popularity_list","average_artist_rank","genre_quantity","genre_intersection","radialRankings","getTopArtists","token","ajax","url","beforeSend","xhr","setRequestHeader","success","data","props","analyseTermData","setState","componentDidMount","console","log","refresh_token","hashParams","e","r","q","hash","substring","exec","decodeURIComponent","render"],"mappings":"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","sourcesContent":["import './graph_styling.css';\nimport React, { Component } from 'react';\nimport * as $ from \"jquery\";\nimport Chart_Constructor from './chart_constructor';\n// https://medium.com/@jonnykalambay/now-playing-using-spotifys-awesome-api-with-react-7db8173a7b13?\n\nclass Spotify_Previewer extends Component {\n    constructor(){\n        super();\n        const params = this.getHashParams()\n        if (window.performance) {\n            if (performance.navigation.type == 1) {\n                window.location.replace('http://localhost:5000/login');\n            }\n          }\n        this.state = {\n            access_token: '',\n            loggedIn: params.access_token ? true : false,\n            spotify_data: {\n                top_artists: [{'x': 1, 'y': 1}],\n                genre_weights: [{'x': 1, 'y': 'Undef'}],\n                top_5_artists_graph: [{'x': 'Undef', 'y': 1}],\n                top_5_artists_images: [{'name': '', 'images': [{'url': ''}]}],\n                top_artists_popularity: [{'x': 1, 'y': 1}],\n                popularity_list: [{'x': 1, 'y': 1}], \n                average_artist_rank: 0, \n                genre_quantity: [{'x': 1, 'y': 1}], \n                genre_intersection: [{'x': 1, 'y': 1}],\n                radialRankings: [{'angle': 360}], \n            }\n        }\n    }\n    getTopArtists(token) {\n        $.ajax({\n            url: 'https://api.spotify.com/v1/me/top/artists?time_range=long_term&limit=50&offset=0',\n            type: \"GET\",\n            beforeSend: (xhr) => {\n            xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n            },\n            success: (data) => {\n                const spotify_data = this.props.analyseTermData(data);\n                this.setState({spotify_data});\n            }\n        });\n    }\n    componentDidMount(){\n        if(this.state.loggedIn) {\n            this.props.loggedIn();\n            this.getTopArtists(this.getHashParams().access_token);\n            console.log('Access Token:', this.getHashParams().access_token);\n            console.log('Refresh Token:', this.getHashParams().refresh_token);\n        } \n    }\n    getHashParams() {\n        var hashParams = {};\n        var e, r = /([^&;=]+)=?([^&;]*)/g,\n            q = window.location.hash.substring(1);\n        while ( e = r.exec(q)) {\n        hashParams[e[1]] = decodeURIComponent(e[2]);\n        }\n        return hashParams;\n    }\n    render() {\n        return (\n            <div className='spotify-components'>\n                <h1>How Similar Are Our Music Tastes?</h1>\n                <h3>This is super important...</h3>\n                <div>\n                <h2>You Like:</h2>\n                <Chart_Constructor\n                    average_artist_rank={this.state.spotify_data.average_artist_rank}\n                    top_5_artists_images={this.state.spotify_data.top_5_artists_images}\n                    data1={this.state.spotify_data.radialRankings} \n                    data2={this.state.spotify_data.top_5_artists_graph}\n                    genres={this.state.spotify_data.genre_weights}\n                />\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Spotify_Previewer;"]},"metadata":{},"sourceType":"module"}